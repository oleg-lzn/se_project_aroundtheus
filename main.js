!function(){"use strict";var e=class{constructor(e,t,s){let{name:n,link:r}=e;this._name=n,this._link=r,this._cardSelector=t,this._handleImageClick=s}_getCardTemplate(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._trashButton.addEventListener("click",(()=>{this._deleteButtonHandler()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_renderCard(){this._cardElement=this._getCardTemplate(),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._trashButton=this._cardElement.querySelector(".card__delete-button"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners()}_deleteButtonHandler(){this._cardElement.remove(),this._cardElement=null}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}getView(){return this._renderCard(),this._cardElement}},t=class{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e,t){const s=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.classList.add(this._errorClass),s.textContent=t}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e),e.value=""})),this.disableButton()}};const s={formSelector:".popup__form",inputSelector:".popup__input",popupImageSelector:".popup__image",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",closeButtonSelector:".popup__close",popup:".popup",cardsListSelector:".cards__list",cardSelector:".card"},n=(document.querySelector("#card-template").content.firstElementChild,document.querySelector(".profile")),r=(n.querySelector(".profile__title"),n.querySelector(".profile__subtitle"),document.querySelector(".popup")),o=r.querySelector("[name=name]"),i=r.querySelector("[name=description]"),a=(document.querySelector(".cards__list"),document.getElementById("addElement")),l=(a.querySelector("[name=title]"),a.querySelector("[name=url]"),document.getElementById("imageOpen")),c=(l.querySelector(".popup__image"),l.querySelector(".popup__title-small"),n.querySelector(".profile__edit-button")),u=n.querySelector(".profile__add-button");document.forms["new-card-form"],document.forms["profile-form"];var p=class{constructor(e){this.popupSelector=e,this.popupElement=document.querySelector(this.popupSelector),this._handleEscClose=this._handleEscClose.bind(this)}open(){this.popupElement.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this.popupElement.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this.popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&this.close()}))}},m=class extends p{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super(t),this._popupForm=this.popupElement.querySelector(".popup__form"),this._handleFormSubmit=s,this._inputList=Array.from(this._popupForm.querySelectorAll(".popup__input"))}_getInputValues(){return this._inputList.reduce(((e,t)=>{const{name:s,value:n}=t;return e[s]=n,e}),{})}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this._popupForm.reset()})),super.setEventListeners()}close(){super.close()}};const d=new class extends p{constructor(e){super(e),this.imageElement=this.popupElement.querySelector(".popup__image"),this.captionElement=this.popupElement.querySelector(".popup__title-small")}open(e){let{link:t,name:s}=e;this.imageElement.src=t,this.imageElement.alt=s,this.captionElement.textContent=s,super.open()}}("#imageOpen");function _(t){return new e(t,"#card-template",(()=>d.open(t))).getView()}const h=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._container=document.querySelector(t),this._renderer=n}clear(){this._container.innerHTML=""}renderItems(){this.clear(),this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=_(e);h.addItem(t)}},s.cardsListSelector);h.renderItems(),d.setEventListeners();const E=new m({popupSelector:"#addElement",handleFormSubmit:e=>{const t=_({name:e.title,link:e.url});h.addItem(t),E.close(),g["new-card-form"].disableButton()}});u.addEventListener("click",(()=>{E.open()})),E.setEventListeners();const S=new m({popupSelector:"#profileChange",handleFormSubmit:e=>{const t=e;f.setUserInfo({name:t.name,description:t.description}),S.close()}}),f=new class{constructor(e){let{nameSelector:t,descriptionSelector:s}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=s}}({nameSelector:".profile__title",descriptionSelector:".profile__subtitle"});c.addEventListener("click",(()=>{g["profile-form"].resetValidation(),S.open();const e=f.getUserInfo();o.value=e.name,i.value=e.description})),S.setEventListeners();const g={};(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((s=>{const n=new t(e,s),r=s.getAttribute("id");g[r]=n,n.enableValidation()}))})(s)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX2dldENhcmRUZW1wbGF0ZSgpIHtcbiAgICAvLyBIZXJlIGdvZXMgdGhlIG1ldGhvZCBmb3IgY2FyZCB0ZW1wbGF0ZSBjcmVhdGlvbiBhbmQgY29weWluZ1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL0hlcmUgZ29lcyB0aGUgcGFydCBvZiBjb2RlLCByZXNwb25zaWJsZSBmb3IgdGhlIGV2ZW50IGxpc3RlbmVyc1xuXG4gICAgLy9saWtlIGJ1dHRvblxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICB9KTtcblxuICAgIC8vZGVsZXRlIGJ1dHRvblxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b25IYW5kbGVyKCk7XG4gICAgfSk7XG5cbiAgICAvL0ltYWdlIGhhbmRsZXJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3JlbmRlckNhcmQoKSB7XG4gICAgLy8gSGVyZSBnb2VzIHRoZSBtZXRob2QgZm9yIGNhcmQgcmVuZGVyaW5nIGFuZCBmaWxsaW5nIGl0IHdpdGggZGF0YVxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl90cmFzaEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8vICAgaGFuZGxlcnMgZm9yIGxpa2UgYW5kIGRlbGV0ZSBidXR0b25zXG4gIF9kZWxldGVCdXR0b25IYW5kbGVyKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fcmVuZGVyQ2FyZCgpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgfVxuXG4gIC8vIHVsdGltYXRlIG1ldGhvZCBmb3IgZm9ybSB2YWxpZGF0aW9uXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gbG9vayBmb3IgdGhlIGlucHV0cyBhbmQgdGhlIHN1Ym1pdCBidXR0b24gaW5zaWRlIHRoZSBmb3JtXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICAvL2xvb3AgdGhyb3VnaCB0aGUgaW5wdXRzIHRvIHNlZSBpZiBhbGwgaXMgdmFsaWRcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgLy9jaGVjayBpbnB1dCB2YWxpZGl0eVxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgLy9kaXNhYmxlIHRoZSBidXR0b24gaWYgaW5wdXQgaXMgbm90IHZhbGlkXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vIGNoZWNrXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIC8vIGNoZWNrIHNob3VsZCB3ZSBwYXNzIGhlcmUgY29uZmlnXG4gICAgLy8gaWYgaW5wdXQgaXMgbm90IHZhbGlkIC0gd2UnZCBsaWtlIHRvIHRha2UgdGhlIHZhbGlkYXRpb24gbWVzc2FnZSxcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNcIiArIGAke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICAvLyBBZGQgZXJyb3IgY2xhc3MgdG8gdGhlIGlucHV0IGFuZCBzaG93IGRpc3BsYXkgZXJyb3IgbWVzc2FnZS5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNcIiArIGAke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgLy8gaWYgYWxsIHRoZSBpbnB1dHMgYXJlIGNvcnJlY3RcbiAgICAvLyByZXNldCBlcnJvciBtZXNzYWdlc1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICAvL2ZvciBjaGVja2luZyB0aGUgaW5wdXQgdmFsaWRpdHlcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRvZ2dsaW5nIHRoZSBidXR0b24gc3RhdGVcbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gXCJcIjtcbiAgICB9KTtcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgcG9wdXBJbWFnZVNlbGVjdG9yOiBcIi5wb3B1cF9faW1hZ2VcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG4gIGNsb3NlQnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19jbG9zZVwiLFxuICBwb3B1cDogXCIucG9wdXBcIixcbiAgY2FyZHNMaXN0U2VsZWN0b3I6IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRTZWxlY3RvcjogXCIuY2FyZFwiLFxufTtcblxuLy8gVGVtcGxhdGVzXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbi8vIFZhcmlhYmxlc1xuZXhwb3J0IGNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVTdWJ0aXRsZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVNb2RhbElucHV0TmFtZSA9IHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9bmFtZV1cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsSW5wdXRTdWJ0aXRsZSA9XG4gIHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9ZGVzY3JpcHRpb25dXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbi8vIFZhcmlhYmxlcyBmb3IgdGhlIEFkZCBQbGFjZSBNb2RhbFxuZXhwb3J0IGNvbnN0IG1vZGFsQWRkQ2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkRWxlbWVudFwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbEFkZENhcmRJbnB1dFBsYWNlID1cbiAgbW9kYWxBZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT10aXRsZV1cIik7XG5leHBvcnQgY29uc3QgbW9kYWxBZGRDYXJkSW5wdXRVcmwgPSBtb2RhbEFkZENhcmQucXVlcnlTZWxlY3RvcihcIltuYW1lPXVybF1cIik7XG5cbi8vIFZhcmlhYmxlcyBmb3IgaW1hZ2UgbW9kYWxcbmV4cG9ydCBjb25zdCBtb2RhbEltYWdlUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2VPcGVuXCIpO1xuZXhwb3J0IGNvbnN0IG1vZGFsSW1hZ2UgPSBtb2RhbEltYWdlUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbFRpdGxlU21hbGwgPSBtb2RhbEltYWdlUHJldmlldy5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fdGl0bGUtc21hbGxcIlxuKTtcblxuLy8gQnV0dG9uc1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVCdXR0b25FZGl0ID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuLy8gRm9ybXNcbmV4cG9ydCBjb25zdCBtb2RhbEFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJuZXctY2FyZC1mb3JtXCJdO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVNb2RhbEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMucG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgdGhpcy5wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMucG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLnBvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKVxuICAgICk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgdXNlcklucHV0ID0gdGhpcy5faW5wdXRMaXN0LnJlZHVjZSgoYWNjLCBpbnB1dCkgPT4ge1xuICAgICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gaW5wdXQ7XG4gICAgICBhY2NbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIHJldHVybiB1c2VySW5wdXQ7XG4gIH1cbiAgLy8gQ29tbWVudCB0byB0aGUgcmV2aWV3ZXIuXG4gIC8vIEkgZGlkIG5vdCB1bmRlcnN0YW5kIHRoZSBsb2dpY3Mgb2YgbWFraW5nIGEgbWV0aG9kLiBDb3VsZCB5b3UgcGxlYXNlIGV4cGxhaW4gaXQ/XG5cbiAgLy8gZ2V0Rm9ybSgpIHtcbiAgLy8gcmV0dXJuIHRoaXMuX3BvcHVwRm9ybVxuICAvLyB9XG4gIC8vIEFsc28sIEkgZGlkIG5vdCB1bmRlcnN0YW5kIHlvdXIgY29tbWVudCBhYm91dCBzZXR0aW5nIGlucHV0IHZhbHVlcyB1c2luZyBhIG1ldGhvZC5cbiAgLy8gSSBnZXQgdGhlbSB1c2luZyBnZXRJbnB1dFZhbHVlcyBhbmQgdGhlbiB0aGV5IGFyZSBwYXNzZWQgdG8gdGhlIFNFTCBtZXRob2Qgb24gbGluZSAzOVxuICAvLyBhbmQgb24gNDAgaXQgaXMgZXhlY3V0ZWQgKHdpdGggdGhlIGhlbHAgb2YgY2FsbGJhY2sgaW4gaW5kZXguanMpXG4gIC8vXG4gIC8vIC8vICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gIC8vICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gIC8vICAgICAvLyBIZXJlIHlvdSBpbnNlcnQgdGhlIGB2YWx1ZWAgYnkgdGhlIGBuYW1lYCBvZiB0aGUgaW5wdXRcbiAgLy8gICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgLy8gICB9KTtcbiAgLy8gfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgLy8gQ29tbWVudCB0byB0aGUgcmV2aWV3ZXIgLSBtb3ZlZCB0aGUgZm9ybSByZXNldCB0byB0aGUgU0VMIG1ldGhvZCBhZnRlciBhIHN1Ym1pc3Npb24uXG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuXG4vLyBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4vLyAgIGNvbnN0IHVzZXJJbnB1dCA9IHt9O1xuLy8gICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuLy8gICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKVxuLy8gICApO1xuLy8gICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+ICh1c2VySW5wdXRbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSkpO1xuLy8gICByZXR1cm4gdXNlcklucHV0O1xuLy8gfVxuIiwiLy8gSW1wb3J0IGFsbCB0aGUgY2xhc3Nlc1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIGFkZENhcmRCdXR0b24sXG4gIHByb2ZpbGVCdXR0b25FZGl0LFxuICBwcm9maWxlTW9kYWxJbnB1dE5hbWUsXG4gIHByb2ZpbGVNb2RhbElucHV0U3VidGl0bGUsXG4gIHByb2ZpbGVNb2RhbEZvcm0sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbi8vIENyZWF0ZSB0aGUgaW5zdGFuY2VzIG9mIHRoZSBjbGFzc2VzXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlT3BlblwiKTtcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKGl0ZW0sIFwiI2NhcmQtdGVtcGxhdGVcIiwgKCkgPT5cbiAgICBpbWFnZVBvcHVwLm9wZW4oaXRlbSlcbiAgKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcbn1cblxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG4gICAgICBjYXJkc0xpc3QuYWRkSXRlbShuZXdDYXJkKTtcbiAgICB9LFxuICB9LFxuICBjb25maWcuY2FyZHNMaXN0U2VsZWN0b3Jcbik7XG4vLyBJbml0aWFsaXplIGFuIGluc3RhbmNlXG5jYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gQ3JlYXRpbmcgYSBwb3B1cCB3aXRoIGFkZCBjYXJkIGZvcm1cbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjYWRkRWxlbWVudFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAodXNlcklucHV0KSA9PiB7XG4gICAgY29uc3QgbmV3VXNlckNhcmQgPSBjcmVhdGVDYXJkKHtcbiAgICAgIG5hbWU6IHVzZXJJbnB1dC50aXRsZSxcbiAgICAgIGxpbms6IHVzZXJJbnB1dC51cmwsXG4gICAgfSk7XG4gICAgY2FyZHNMaXN0LmFkZEl0ZW0obmV3VXNlckNhcmQpO1xuICAgIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xuICAgIGZvcm1WYWxpZGF0b3JzW1wibmV3LWNhcmQtZm9ybVwiXS5kaXNhYmxlQnV0dG9uKCk7XG4gIH0sXG59KTtcblxuLy8gQWRkIG5ldyBjYXJkIGJ1dHRvbiBoYW5kbGVyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy8gSW5pdGlhbGl6ZSBhbiBpbnN0YW5jZVxubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIFVzZXJJbmZvIHBvcHVwXG4vLyBDb21tZW50IHRvIHRoZSByZXZpZXdlciAtIEkgY2hhbmdlZCBoZXJlIHRoZSBsb2dpY3MgdG8gdXNlXG4vLyB0aGUgUG9wdXBXaXRoRm9ybUNsYXNzIGZvciBQcm9maWxlIERhdGEgY2hhbmdlXG4vLyBhbmQgcmVtb3ZlZCB0aGUgZXh0ZW5zaW9uIG9mIHRoZSBwb3B1cCBjbGFzcyB0byB0aGUgVXNlckluZm8gY2xhc3NcblxuY29uc3QgdXNlclBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZUNoYW5nZVwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAodXNlcklucHV0KSA9PiB7XG4gICAgY29uc3QgbmV3VXNlcklucHV0ID0gdXNlcklucHV0O1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IG5ld1VzZXJJbnB1dC5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IG5ld1VzZXJJbnB1dC5kZXNjcmlwdGlvbixcbiAgICB9KTtcbiAgICB1c2VyUG9wdXBGb3JtLmNsb3NlKCk7XG4gIH0sXG59KTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXG59KTtcblxucHJvZmlsZUJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHVzZXJQb3B1cEZvcm0ub3BlbigpO1xuICBjb25zdCBjdXJyZW50VXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlTW9kYWxJbnB1dE5hbWUudmFsdWUgPSBjdXJyZW50VXNlckRhdGEubmFtZTtcbiAgcHJvZmlsZU1vZGFsSW5wdXRTdWJ0aXRsZS52YWx1ZSA9IGN1cnJlbnRVc2VyRGF0YS5kZXNjcmlwdGlvbjtcbn0pO1xuXG4vLyBJbml0aWFsaXplIGFuIGluc3RhbmNlXG51c2VyUG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIFVuaXZlcnNhbCBoYW5kbGVyIGZvciBmb3JtcyB2YWxpZGF0aW9uXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm0pID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm0pO1xuICAgIGNvbnN0IGZvcm1JZCA9IGZvcm0uZ2V0QXR0cmlidXRlKFwiaWRcIik7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybUlkXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcblxuLy8gcHJvZmlsZUJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4vLyAgIHVzZXJQb3B1cC5vcGVuKCk7XG4vLyAgIGNvbnN0IHVzZXJEYXRhID0gdXNlclBvcHVwLmdldFVzZXJJbmZvKCk7XG4vLyAgIHByb2ZpbGVNb2RhbElucHV0TmFtZS52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XG4vLyAgIHByb2ZpbGVNb2RhbElucHV0U3VidGl0bGUudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcbi8vIH0pO1xuXG4vLyB1c2VyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gLy8gU3VibWl0dGluZyB0aGUgbmV3IHByb2ZpbGUgZGF0YVxuLy8gcHJvZmlsZU1vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbi8vICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbi8vICAgY29uc3QgbmV3VXNlckRhdGEgPSB7XG4vLyAgICAgbmFtZTogcHJvZmlsZU1vZGFsSW5wdXROYW1lLnZhbHVlLFxuLy8gICAgIGRlc2NyaXB0aW9uOiBwcm9maWxlTW9kYWxJbnB1dFN1YnRpdGxlLnZhbHVlLFxuLy8gICB9O1xuXG4vLyAgIHVzZXJQb3B1cC5zZXRVc2VySW5mbyhuZXdVc2VyRGF0YSk7XG4vLyAgIHVzZXJQb3B1cC5jbG9zZSgpO1xuLy8gfSk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLmltYWdlRWxlbWVudCA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuY2FwdGlvbkVsZW1lbnQgPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX3RpdGxlLXNtYWxsXCJcbiAgICApO1xuICB9XG5cbiAgb3Blbih7IGxpbmssIG5hbWUgfSkge1xuICAgIHRoaXMuaW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XG4gICAgdGhpcy5pbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcbiAgICB0aGlzLmNhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5jbGVhcigpO1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG5cbi8vIC8vRWRpdGluZyB0aGUgcHJvZmlsZSAmIG9wZW5pbmcgdGhlIG1vZGFsXG4vLyBwcm9maWxlQnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gb3BlbkVkaXRQcm9maWxlKCkge1xuLy8gICAvL3Jlc2V0dGluZyB2YWxpZGF0aW9uIGFuZCBlcnJvcnMgb24gb3BlbmluZyB0aGUgcHJvZmlsZSBtb2RhbFxuLy8gICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbi8vICAgb3BlblBvcHVwKHByb2ZpbGVNb2RhbCk7XG4vLyAgIHByb2ZpbGVNb2RhbElucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcbi8vICAgcHJvZmlsZU1vZGFsSW5wdXRTdWJ0aXRsZS52YWx1ZSA9IHByb2ZpbGVTdWJ0aXRsZS50ZXh0Q29udGVudDtcbi8vIH0pO1xuXG4vLyAvL1N1Ym1pdHRpbmcgdGhlIGZvcm1cbi8vIGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuLy8gICBldnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgcHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gcHJvZmlsZU1vZGFsSW5wdXROYW1lLnZhbHVlO1xuLy8gICBwcm9maWxlU3VidGl0bGUudGV4dENvbnRlbnQgPSBwcm9maWxlTW9kYWxJbnB1dFN1YnRpdGxlLnZhbHVlO1xuLy8gICBjbG9zZVBvcHVwKHByb2ZpbGVNb2RhbCk7XG4vLyB9XG5cbi8vIHByb2ZpbGVNb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZ2V0Q2FyZFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfdHJhc2hCdXR0b24iLCJfZGVsZXRlQnV0dG9uSGFuZGxlciIsIl9jYXJkSW1hZ2UiLCJfcmVuZGVyQ2FyZCIsIl9jYXJkRWxlbWVudCIsIl9jYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldFZpZXciLCJjb25maWciLCJmb3JtIiwiX2Zvcm0iLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwicG9wdXBJbWFnZVNlbGVjdG9yIiwiY2xvc2VCdXR0b25TZWxlY3RvciIsInBvcHVwIiwiY2FyZHNMaXN0U2VsZWN0b3IiLCJwcm9maWxlIiwicHJvZmlsZU1vZGFsIiwicHJvZmlsZU1vZGFsSW5wdXROYW1lIiwicHJvZmlsZU1vZGFsSW5wdXRTdWJ0aXRsZSIsIm1vZGFsQWRkQ2FyZCIsImdldEVsZW1lbnRCeUlkIiwibW9kYWxJbWFnZVByZXZpZXciLCJwcm9maWxlQnV0dG9uRWRpdCIsImFkZENhcmRCdXR0b24iLCJmb3JtcyIsInBvcHVwU2VsZWN0b3IiLCJwb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlZHVjZSIsImFjYyIsImlucHV0IiwiaW5wdXRWYWx1ZXMiLCJyZXNldCIsImltYWdlUG9wdXAiLCJpbWFnZUVsZW1lbnQiLCJjYXB0aW9uRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJpdGVtIiwiQ2FyZCIsImNhcmRzTGlzdCIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfY29udGFpbmVyIiwiX3JlbmRlcmVyIiwiY2xlYXIiLCJpbm5lckhUTUwiLCJyZW5kZXJJdGVtcyIsImVsZW1lbnQiLCJhZGRJdGVtIiwicHJlcGVuZCIsIm5ld0NhcmQiLCJuZXdDYXJkUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwidXNlcklucHV0IiwibmV3VXNlckNhcmQiLCJ0aXRsZSIsInVybCIsImZvcm1WYWxpZGF0b3JzIiwidXNlclBvcHVwRm9ybSIsIm5ld1VzZXJJbnB1dCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJfcmVmMiIsImN1cnJlbnRVc2VyRGF0YSIsInZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtSWQiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9